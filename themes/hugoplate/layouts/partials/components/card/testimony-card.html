{{ with .Params.testimony }}
<a href="{{ $.Page.RelPermalink }}" 
   class="block group relative bg-white rounded-2xl overflow-hidden shadow-lg 
          border border-gray-100 hover:border-primary hover:shadow-2xl 
          hover:-translate-y-2 hover:scale-[1.02]
          transition-all duration-500 ease-out no-underline cursor-pointer">

  <!-- Subtle gradient overlay -->
  <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-light/5 
              opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-10"></div>

  <!-- Enhanced Tags -->
  {{ with .tags }}
    <div class="absolute top-4 right-4 flex flex-col gap-2 items-end z-30">
      {{ range $index, $tag := . }}
        <span class="bg-primary/10 text-primary text-sm font-semibold px-3 py-1 rounded-full
                     border border-primary/20 backdrop-blur-sm
                     hover:bg-primary/20 transform hover:scale-105 
                     transition-all duration-300 animate-tag-in"
              style="animation-delay: {{ mul $index 100 }}ms;">
          #{{ $tag }}
        </span>
      {{ end }}
    </div>
  {{ end }}

  <!-- Enhanced Image section with smooth morphing -->
  <div class="relative overflow-hidden transition-all duration-700 ease-out 
              h-48 group-hover:h-24">
    
    <!-- Image with enhanced effects -->
    <img 
      src="{{ .image | relURL }}" 
      alt="{{ .full_name }}" 
      class="w-full h-full object-cover object-top transition-all duration-700 ease-out
             group-hover:scale-110 group-hover:brightness-110" 
    />
    
    <!-- Gradient overlay for better text contrast -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent 
                group-hover:from-black/40 transition-all duration-500"></div>
    
    <!-- Floating name badge -->
    <div class="absolute bottom-3 left-4 opacity-0 group-hover:opacity-100 
                transform translate-y-2 group-hover:translate-y-0
                transition-all duration-500 delay-200">
      <span class="bg-white/90 backdrop-blur-sm text-gray-800 text-sm font-medium 
                   px-3 py-1 rounded-full shadow-lg border border-white/50">
        {{ .full_name }}
      </span>
    </div>
  </div>

  <!-- Enhanced Content section -->
  <div class="relative z-20 p-6 flex flex-col">
    
    <!-- Company info with icon -->
    <div class="flex items-center gap-2 mb-2">
      <svg class="w-4 h-4 text-primary flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 4h1m4 0h1M9 16h1"></path>
      </svg>
      <h4 class="text-xl font-bold text-gray-800 transform group-hover:text-primary 
                 transition-colors duration-300">
        {{ .company_name }}
      </h4>
    </div>

    <!-- Enhanced Date with icon -->
    <div class="flex items-center gap-2 mb-4">
      <svg class="w-3 h-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      <p class="text-xs text-primary font-medium">
        Publi√© le {{ .date }}
      </p>
    </div>

    <!-- Enhanced reveal section -->
    <div class="opacity-0 max-h-0 group-hover:opacity-100 group-hover:max-h-[500px] 
                transition-all duration-700 ease-out overflow-hidden">
      
      <!-- Quote icon -->
      <div class="flex items-start gap-3 mb-3">
        <svg class="w-6 h-6 text-primary/40 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 24 24">
          <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h4v10h-10z"/>
        </svg>
        <p class="text-sm text-gray-700 leading-relaxed flex-1 transform group-hover:text-gray-800 
                 transition-colors duration-300">
          {{ .description | truncate 300 | safeHTML }}
        </p>
      </div>

      <!-- Enhanced CTA button -->
      <div class="mt-4 transform translate-y-2 group-hover:translate-y-0 
                  transition-transform duration-500 delay-300">
        <span class="group/btn inline-flex items-center gap-2 px-5 py-2 
                     bg-gradient-to-r from-primary to-light text-white font-semibold 
                     rounded-lg shadow-md hover:shadow-lg hover:scale-105
                     transition-all duration-300 ease-out">
          <span>Read testimony</span>
          <svg class="w-4 h-4 transform group-hover/btn:translate-x-1 
                     transition-transform duration-300" 
               fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M9 5l7 7-7 7"></path>
          </svg>
        </span>
      </div>
    </div>
  </div>

  <!-- Elegant bottom accent -->
  <div class="absolute bottom-0 left-0 w-0 h-1 bg-gradient-to-r from-primary to-light 
              group-hover:w-full transition-all duration-700 delay-200"></div>
  
  <!-- Corner accent dot -->
  <div class="absolute top-3 left-3 w-2 h-2 bg-primary/30 rounded-full 
              opacity-0 group-hover:opacity-100 animate-pulse 
              transition-opacity duration-500 delay-400"></div>
</a>

<style>
  @keyframes tag-in {
    0% {
      opacity: 0;
      transform: translateY(-10px) scale(0.8);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .animate-tag-in {
    animation: tag-in 0.4s ease-out forwards;
    opacity: 0;
  }

  /* Enhanced focus states for accessibility */
  .group:focus-within {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }
</style>

{{ end }}